'use strict';(function(e,t){'function'==typeof define&&define.amd?define(t):'object'==typeof exports?module.exports=t():e.PhotoSwipe=t()})(this,function(){'use strict';return function(e,t,i,a){var o=Math.min,n=Math.abs,l=Math.round,s=Math.max,r=Math.PI,d={features:null,bind:function(e,t,a,o){var n=(o?'remove':'add')+'EventListener';t=t.split(' ');for(var s=0;s<t.length;s++)t[s]&&e[n](t[s],a,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var i=document.createElement(t||'div');return e&&(i.className=e),i},getScrollY:function(){var e=window.pageYOffset;return void 0===e?document.documentElement.scrollTop:e},unbind:function(e,t,i){d.bind(e,t,i,!0)},removeClass:function(e,t){var i=new RegExp('(\\s|^)'+t+'(\\s|$)');e.className=e.className.replace(i,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'')},addClass:function(e,t){d.hasClass(e,t)||(e.className+=(e.className?' ':'')+t)},hasClass:function(e,t){return e.className&&new RegExp('(^|\\s)'+t+'(\\s|$)').test(e.className)},getChildByClass:function(e,t){for(var i=e.firstChild;i;){if(d.hasClass(i,t))return i;i=i.nextSibling}},arraySearch:function(e,t,a){for(var o=e.length;o--;)if(e[o][a]===t)return o;return-1},extend:function(e,t,i){for(var a in t)if(t.hasOwnProperty(a)){if(i&&e.hasOwnProperty(a))continue;e[a]=t[a]}},easing:{sine:{out:function(e){return Math.sin(e*(r/2))},inOut:function(e){return-(Math.cos(r*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(d.features)return d.features;var e=d.createEl(),t=e.style,o='',n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch='ontouchstart'in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!n.pointerEvent){var l=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&0<r.length&&(r=parseInt(r[1],10),1<=r&&8>r&&(n.isOldIOSPhone=!0))}var p=l.match(/Android\s([0-9\.]*)/),m=p?p[1]:0;m=parseFloat(m),1<=m&&(4.4>m&&(n.isOldAndroid=!0),n.androidVersion=m),n.isMobileOpera=/opera mini|opera mobi/i.test(l)}for(var c,x,u=['transform','perspective','animationName'],y=['','webkit','Moz','ms','O'],h=0;4>h;h++){o=y[h];for(var i=0;3>i;i++)c=u[i],x=o+(o?c.charAt(0).toUpperCase()+c.slice(1):c),!n[c]&&x in t&&(n[c]=x);o&&!n.raf&&(o=o.toLowerCase(),n.raf=window[o+'RequestAnimationFrame'],n.raf&&(n.caf=window[o+'CancelAnimationFrame']||window[o+'CancelRequestAnimationFrame']))}if(!n.raf){var a=0;n.raf=function(e){var t=new Date().getTime(),i=s(0,16-(t-a)),o=window.setTimeout(function(){e(t+i)},i);return a=t+i,o},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect,d.features=n,n}};d.detectFeatures(),d.features.oldIE&&(d.bind=function(e,t,a,o){t=t.split(' ');for(var n,s=(o?'detach':'attach')+'Event',l=function(){a.handleEvent.call(a)},r=0;r<t.length;r++)if(n=t[r],n)if('object'==typeof a&&a.handleEvent){if(!o)a['oldIE'+n]=l;else if(!a['oldIE'+n])return!1;e[s]('on'+n,a['oldIE'+n])}else e[s]('on'+n,a)});var m=this,c=25,x=3,u={allowPanToNext:!0,spacing:0.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:0.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(e){return'A'===e.tagName},getDoubleTapZoom:function(e,t){return e?1:0.7>t.initialZoomLevel?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:'fit'};d.extend(u,a);var y,h,g,f,w,v,b,C,I,D,S,E,A,O,k,R,T,Z,P,L,F,_,z,M,N,U,Y,H,W,B,G,X,V,K,q,j,$,Q,J,ee,te,ie,ae,oe,ne,se,le,re,de,pe,me,ce,xe,ue,ye,he,ge,fe=function(){return{x:0,y:0}},we=fe(),ve=fe(),be=fe(),Ce={},Ie=0,De={},Se=fe(),Ee=0,Ae=!0,Oe=[],ke={},Re=!1,Te=function(e,t){d.extend(m,t.publicMethods),Oe.push(e)},Ze=function(e){var t=oi();if(e>t-1)return e-t;return 0>e?t+e:e},Pe={},Le=function(e,t){return Pe[e]||(Pe[e]=[]),Pe[e].push(t)},Fe=function(e){var t=Pe[e];if(t){var a=Array.prototype.slice.call(arguments);a.shift();for(var o=0;o<t.length;o++)t[o].apply(m,a)}},_e=function(){return new Date().getTime()},ze=function(e){ye=e,m.bg.style.opacity=e*u.bgOpacity},Me=function(e,t,i,a,o){(!Re||o&&o!==m.currItem)&&(a/=o?o.fitRatio:m.currItem.fitRatio),e[_]=E+t+'px, '+i+'px'+A+' scale('+a+')'},Ne=function(e){pe&&(e&&(D>m.currItem.fitRatio?!Re&&(hi(m.currItem,!1,!0),Re=!0):Re&&(hi(m.currItem),Re=!1)),Me(pe,be.x,be.y,D))},Ue=function(e){e.container&&Me(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Ye=function(e,t){t[_]=E+e+'px, 0px'+A},He=function(e,t){if(!u.loop&&t){var i=f+(Se.x*Ie-e)/Se.x,a=l(e-It.x);(0>i&&0<a||i>=oi()-1&&0>a)&&(e=It.x+a*u.mainScrollEndFriction)}It.x=e,Ye(e,w)},We=function(e,t){var i=Dt[e]-De[e];return ve[e]+we[e]+i-i*(t/S)},Be=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ge=function(e){e.x=l(e.x),e.y=l(e.y)},Xe=null,Ve=function(){Xe&&(d.unbind(document,'mousemove',Ve),d.addClass(e,'pswp--has_mouse'),u.mouseUsed=!0,Fe('mouseUsed')),Xe=setTimeout(function(){Xe=null},100)},Ke=function(){d.bind(document,'keydown',m),G.transform&&d.bind(m.scrollWrap,'click',m),u.mouseUsed||d.bind(document,'mousemove',Ve),d.bind(window,'resize scroll orientationchange',m),Fe('bindEvents')},qe=function(){d.unbind(window,'resize scroll orientationchange',m),d.unbind(window,'scroll',I.scroll),d.unbind(document,'keydown',m),d.unbind(document,'mousemove',Ve),G.transform&&d.unbind(m.scrollWrap,'click',m),J&&d.unbind(window,b,m),clearTimeout(X),Fe('unbindEvents')},je=function(e,t){var i=ci(m.currItem,Ce,e);return t&&(de=i),i},$e=function(e){return e||(e=m.currItem),e.initialZoomLevel},Qe=function(e){return e||(e=m.currItem),0<e.w?u.maxSpreadZoom:1},Je=function(e,t,i,a){return a===m.currItem.initialZoomLevel?(i[e]=m.currItem.initialPosition[e],!0):(i[e]=We(e,a),i[e]>t.min[e])?(i[e]=t.min[e],!0):!!(i[e]<t.max[e])&&(i[e]=t.max[e],!0)},et=function(){if(_){var t=G.perspective&&!M;return E='translate'+(t?'3d(':'('),void(A=G.perspective?', 0px)':')')}_='left',d.addClass(e,'pswp--ie'),Ye=function(e,t){t.left=e+'px'},Ue=function(e){var t=1<e.fitRatio?1:e.fitRatio,i=e.container.style,a=t*e.w,o=t*e.h;i.width=a+'px',i.height=o+'px',i.left=e.initialPosition.x+'px',i.top=e.initialPosition.y+'px'},Ne=function(){if(pe){var e=pe,t=m.currItem,i=1<t.fitRatio?1:t.fitRatio,a=i*t.w,o=i*t.h;e.width=a+'px',e.height=o+'px',e.left=be.x+'px',e.top=be.y+'px'}}},tt=function(t){var e='';u.escKey&&27===t.keyCode?e='close':u.arrowKeys&&(37===t.keyCode?e='prev':39===t.keyCode&&(e='next')),!e||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,m[e]())},it=function(t){!t||(ie||te||me||$)&&(t.preventDefault(),t.stopPropagation())},at=function(){m.setScrollOffset(0,d.getScrollY())},ot={},nt=0,st=function(e){ot[e]&&(ot[e].raf&&U(ot[e].raf),nt--,delete ot[e])},lt=function(e){ot[e]&&st(e),ot[e]||(nt++,ot[e]={})},rt=function(){for(var e in ot)ot.hasOwnProperty(e)&&st(e)},dt=function(e,i,a,o,n,s,l){var r,t=_e();lt(e);var d=function(){if(ot[e]){if(r=_e()-t,r>=o)return st(e),s(a),void(l&&l());s((a-i)*n(r/o)+i),ot[e].raf=N(d)}};d()},pt=30,mt=10,ct={},p={},xt={},ut={},yt={},ht=[],gt={},ft=[],wt={},vt=0,bt=fe(),Ct=0,It=fe(),Dt=fe(),St=fe(),Et=function(e,t){return e.x===t.x&&e.y===t.y},At=function(e,t){return n(e.x-t.x)<c&&n(e.y-t.y)<c},Ot=function(e,t){return wt.x=n(e.x-t.x),wt.y=n(e.y-t.y),Math.sqrt(wt.x*wt.x+wt.y*wt.y)},kt=function(){ae&&(U(ae),ae=null)},Rt=function(){J&&(ae=N(Rt),Xt())},Tt=function(){return'fit'!==u.scaleMode||D!==m.currItem.initialZoomLevel},Zt=function(e,t){return e&&e!==document&&(e.getAttribute('class')&&-1<e.getAttribute('class').indexOf('pswp__scroll-wrap')?!1:t(e)?e:Zt(e.parentNode,t))},Pt={},Lt=function(t,e){return Pt.prevent=!Zt(t.target,u.isClickableElement),Fe('preventDragEvent',t,e,Pt),Pt.prevent},Ft=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},_t=function(e,t,i){i.x=0.5*(e.x+t.x),i.y=0.5*(e.y+t.y)},zt=function(e,t,i){if(50<e-K){var a=2<ft.length?ft.shift():{};a.x=t,a.y=i,ft.push(a),K=e}},Mt=function(){var e=be.y-m.currItem.initialPosition.y;return 1-n(e/(Ce.y/2))},Nt={},Ut={},Yt=[],Ht=function(t){for(;0<Yt.length;)Yt.pop();return z?(ge=0,ht.forEach(function(e){0===ge?Yt[0]=e:1===ge&&(Yt[1]=e),ge++})):-1<t.type.indexOf('touch')?t.touches&&0<t.touches.length&&(Yt[0]=Ft(t.touches[0],Nt),1<t.touches.length&&(Yt[1]=Ft(t.touches[1],Ut))):(Nt.x=t.pageX,Nt.y=t.pageY,Nt.id='',Yt[0]=Nt),Yt},Wt=function(e,t){var i,a,o,n,s=0,l=be[e]+t[e],r=0<t[e],d=It.x+t.x,p=It.x-gt.x;return i=l>de.min[e]||l<de.max[e]?u.panEndFriction:1,l=be[e]+t[e]*i,(u.allowPanToNext||D===m.currItem.initialZoomLevel)&&(pe?'h'===ce&&'x'===e&&!te&&(r?(l>de.min[e]&&(i=u.panEndFriction,s=de.min[e]-l,a=de.min[e]-ve[e]),(0>=a||0>p)&&1<oi()?(n=d,0>p&&d>gt.x&&(n=gt.x)):de.min.x!==de.max.x&&(o=l)):(l<de.max[e]&&(i=u.panEndFriction,s=l-de.max[e],a=ve[e]-de.max[e]),(0>=a||0<p)&&1<oi()?(n=d,0<p&&d<gt.x&&(n=gt.x)):de.min.x!==de.max.x&&(o=l))):n=d,'x'===e)?(void 0!==n&&(He(n,!0),oe=n!==gt.x),de.min.x!==de.max.x&&(void 0===o?!oe&&(be.x+=t.x*i):be.x=o),void 0!==n):void(!me&&!oe&&D>m.currItem.fitRatio&&(be[e]+=t[e]*i))},Bt=function(t){if(!('mousedown'===t.type&&0<t.button)){if(ii)return void t.preventDefault();if(!(Q&&'mousedown'===t.type)){if(Lt(t,!0)&&t.preventDefault(),Fe('pointerDown'),z){var e=d.arraySearch(ht,t.pointerId,'id');0>e&&(e=ht.length),ht[e]={x:t.pageX,y:t.pageY,id:t.pointerId}}var i=Ht(t),a=i.length;ne=null,rt(),J&&1!==a||(J=xe=!0,d.bind(window,b,m),j=he=ue=$=oe=ie=ee=te=!1,ce=null,Fe('firstTouchStart',i),Be(ve,be),we.x=we.y=0,Be(ut,i[0]),Be(yt,ut),gt.x=Se.x*Ie,ft=[{x:ut.x,y:ut.y}],K=V=_e(),je(D,!0),kt(),Rt()),se||!(1<a)||me||oe||(S=D,te=!1,se=ee=!0,we.y=we.x=0,Be(ve,be),Be(ct,i[0]),Be(p,i[1]),_t(ct,p,St),Dt.x=n(St.x)-be.x,Dt.y=n(St.y)-be.y,le=re=Ot(ct,p))}}},Gt=function(t){if(t.preventDefault(),z){var e=d.arraySearch(ht,t.pointerId,'id');if(-1<e){var i=ht[e];i.x=t.pageX,i.y=t.pageY}}if(J){var a=Ht(t);if(ce||ie||se)ne=a;else if(It.x!==Se.x*Ie)ce='h';else{var o=n(a[0].x-ut.x)-n(a[0].y-ut.y);n(o)>=mt&&(ce=0<o?'h':'v',ne=a)}}},Xt=function(){if(ne){var e=ne.length;if(0!==e)if(Be(ct,ne[0]),xt.x=ct.x-ut.x,xt.y=ct.y-ut.y,se&&1<e){if(ut.x=ct.x,ut.y=ct.y,!xt.x&&!xt.y&&Et(ne[1],p))return;Be(p,ne[1]),te||(te=!0,Fe('zoomGestureStarted'));var t=Ot(ct,p),i=$t(t);i>m.currItem.initialZoomLevel+m.currItem.initialZoomLevel/15&&(he=!0);var a=1,o=$e(),s=Qe();if(!(i<o))i>s&&(a=(i-s)/(6*o),1<a&&(a=1),i=s+a*o);else if(u.pinchToClose&&!he&&S<=m.currItem.initialZoomLevel){var l=o-i,r=1-l/(o/1.2);ze(r),Fe('onPinchClose',r),ue=!0}else a=(o-i)/o,1<a&&(a=1),i=o-a*(o/3);0>a&&(a=0),le=t,_t(ct,p,bt),we.x+=bt.x-St.x,we.y+=bt.y-St.y,Be(St,bt),be.x=We('x',i),be.y=We('y',i),j=i>D,D=i,Ne()}else{if(!ce)return;if(xe&&(xe=!1,n(xt.x)>=mt&&(xt.x-=ne[0].x-yt.x),n(xt.y)>=mt&&(xt.y-=ne[0].y-yt.y)),ut.x=ct.x,ut.y=ct.y,0===xt.x&&0===xt.y)return;if('v'===ce&&u.closeOnVerticalDrag&&!Tt()){we.y+=xt.y,be.y+=xt.y;var d=Mt();return $=!0,Fe('onVerticalDrag',d),ze(d),void Ne()}zt(_e(),ct.x,ct.y),ie=!0,de=m.currItem.bounds;var c=Wt('x',xt);c||(Wt('y',xt),Ge(be),Ne())}}},Vt=function(t){if(G.isOldAndroid){if(Q&&'mouseup'===t.type)return;-1<t.type.indexOf('touch')&&(clearTimeout(Q),Q=setTimeout(function(){Q=0},600))}Fe('pointerUp'),Lt(t,!1)&&t.preventDefault();var e;if(z){var i=d.arraySearch(ht,t.pointerId,'id');if(-1<i)if(e=ht.splice(i,1)[0],navigator.pointerEnabled)e.type=t.pointerType||'mouse';else{e.type={2:'touch',3:'pen',4:'mouse'}[t.pointerType],e.type||(e.type=t.pointerType||'mouse')}}var a,o=Ht(t),n=o.length;if('mouseup'===t.type&&(n=0),2===n)return ne=null,!0;1===n&&Be(yt,o[0]),0!==n||ce||me||(!e&&('mouseup'===t.type?e={x:t.pageX,y:t.pageY,type:'mouse'}:t.changedTouches&&t.changedTouches[0]&&(e={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,type:'touch'})),Fe('touchRelease',t,e));var s=-1;if(0===n&&(J=!1,d.unbind(window,b,m),kt(),se?s=0:-1!=Ct&&(s=_e()-Ct)),Ct=1===n?_e():-1,a=-1!=s&&150>s?'zoom':'swipe',se&&2>n&&(se=!1,1===n&&(a='zoomPointerUp'),Fe('zoomGestureEnded')),ne=null,ie||te||me||$){if(rt(),q||(q=Kt()),q.calculateSwipeSpeed('x'),$){var l=Mt();if(l<u.verticalDragRange)m.close();else{var r=be.y,p=ye;dt('verticalDrag',0,1,300,d.easing.cubic.out,function(e){be.y=(m.currItem.initialPosition.y-r)*e+r,ze((1-p)*e+p),Ne()}),Fe('onVerticalDrag',1)}return}if((oe||me)&&0===n){var c=jt(a,q);if(c)return;a='zoomPointerUp'}return me?void 0:'swipe'===a?void(!oe&&D>m.currItem.fitRatio&&qt(q)):void Qt()}},Kt=function(){var e,t,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(a){1<ft.length?(e=_e()-K+50,t=ft[ft.length-2][a]):(e=_e()-V,t=yt[a]),i.lastFlickOffset[a]=ut[a]-t,i.lastFlickDist[a]=n(i.lastFlickOffset[a]),i.lastFlickSpeed[a]=20<i.lastFlickDist[a]?i.lastFlickOffset[a]/e:0,0.1>n(i.lastFlickSpeed[a])&&(i.lastFlickSpeed[a]=0),i.slowDownRatio[a]=0.95,i.slowDownRatioReverse[a]=1-i.slowDownRatio[a],i.speedDecelerationRatio[a]=1},calculateOverBoundsAnimOffset:function(e,t){i.backAnimStarted[e]||(be[e]>de.min[e]?i.backAnimDestination[e]=de.min[e]:be[e]<de.max[e]&&(i.backAnimDestination[e]=de.max[e]),i.backAnimDestination[e]!==void 0&&(i.slowDownRatio[e]=0.7,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],0.05>i.speedDecelerationRatioAbs[e]&&(i.lastFlickSpeed[e]=0,i.backAnimStarted[e]=!0,dt('bounceZoomPan'+e,be[e],i.backAnimDestination[e],t||300,d.easing.sine.out,function(t){be[e]=t,Ne()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]*=i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10,i.speedDecelerationRatioAbs[e]=n(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,be[e]+=i.distanceOffset[e])},panAnimLoop:function(){if(ot.zoomPan&&(ot.zoomPan.raf=N(i.panAnimLoop),i.now=_e(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset('x'),i.calculateAnimOffset('y'),Ne(),i.calculateOverBoundsAnimOffset('x'),i.calculateOverBoundsAnimOffset('y'),0.05>i.speedDecelerationRatioAbs.x&&0.05>i.speedDecelerationRatioAbs.y))return be.x=l(be.x),be.y=l(be.y),Ne(),void st('zoomPan')}};return i},qt=function(e){return e.calculateSwipeSpeed('y'),de=m.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},0.05>=n(e.lastFlickSpeed.x)&&0.05>=n(e.lastFlickSpeed.y)?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset('x'),e.calculateOverBoundsAnimOffset('y'),!0):void(lt('zoomPan'),e.lastNow=_e(),e.panAnimLoop())},jt=function(e,t){var i;me||(vt=f);var a;if('swipe'===e){var l=ut.x-yt.x,r=10>t.lastFlickDist.x;l>pt&&(r||20<t.lastFlickOffset.x)?a=-1:l<-pt&&(r||-20>t.lastFlickOffset.x)&&(a=1)}var p;a&&(f+=a,0>f?(f=u.loop?oi()-1:0,p=!0):f>=oi()&&(f=u.loop?0:oi()-1,p=!0),(!p||u.loop)&&(Ee+=a,Ie-=a,i=!0));var c,x=Se.x*Ie,y=n(x-It.x);return i||x>It.x==0<t.lastFlickSpeed.x?(c=0<n(t.lastFlickSpeed.x)?y/n(t.lastFlickSpeed.x):333,c=o(c,400),c=s(c,250)):c=333,vt===f&&(i=!1),me=!0,Fe('mainScrollAnimStart'),dt('mainScroll',It.x,x,c,d.easing.cubic.out,He,function(){rt(),me=!1,vt=-1,(i||vt!==f)&&m.updateCurrItem(),Fe('mainScrollAnimComplete')}),i&&m.updateCurrItem(!0),i},$t=function(e){return 1/re*e*S},Qt=function(){var e=D,t=$e(),i=Qe();D<t?e=t:D>i&&(e=i);var a,o=ye;return ue&&!j&&!he&&D<t?(m.close(),!0):(ue&&(a=function(e){ze((1-o)*e+o)}),m.zoomTo(e,0,200,d.easing.cubic.out,a),!0)};Te('Gestures',{publicMethods:{initGestures:function(){var e=function(e,t,i,a,o){Z=e+t,P=e+i,L=e+a,F=o?e+o:''};z=G.pointerEvent,z&&G.touch&&(G.touch=!1),z?navigator.pointerEnabled?e('pointer','down','move','up','cancel'):e('MSPointer','Down','Move','Up','Cancel'):G.touch?(e('touch','start','move','end','cancel'),M=!0):e('mouse','down','move','up'),b=P+' '+L+' '+F,C=Z,z&&!M&&(M=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),m.likelyTouchDevice=M,I[Z]=Bt,I[P]=Gt,I[L]=Vt,F&&(I[F]=I[L]),G.touch&&(C+=' mousedown',b+=' mousemove mouseup',I.mousedown=I[Z],I.mousemove=I[P],I.mouseup=I[L]),M||(u.allowPanToNext=!1)}}});var Jt,ei,ti,ii,ai,oi,ni,si=function(t,i,a,o){Jt&&clearTimeout(Jt),ii=!0,ti=!0;var n;t.initialLayout?(n=t.initialLayout,t.initialLayout=null):n=u.getThumbBoundsFn&&u.getThumbBoundsFn(f);var s=a?u.hideAnimationDuration:u.showAnimationDuration,l=function(){st('initialZoom'),a?(m.template.removeAttribute('style'),m.bg.removeAttribute('style')):(ze(1),i&&(i.style.display='block'),d.addClass(e,'pswp--animated-in'),Fe('initialZoom'+(a?'OutEnd':'InEnd'))),o&&o(),ii=!1};if(!s||!n||void 0===n.x)return Fe('initialZoom'+(a?'Out':'In')),D=t.initialZoomLevel,Be(be,t.initialPosition),Ne(),e.style.opacity=a?0:1,ze(1),void(s?setTimeout(function(){l()},s):l());(function(){var i=g,o=!m.currItem.src||m.currItem.loadError||u.showHideOpacity;t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility='hidden'),a||(D=n.w/t.w,be.x=n.x,be.y=n.y-H,m[o?'template':'bg'].style.opacity=1e-3,Ne()),lt('initialZoom'),a&&!i&&d.removeClass(e,'pswp--animated-in'),o&&(a?d[(i?'remove':'add')+'Class'](e,'pswp--animate_opacity'):setTimeout(function(){d.addClass(e,'pswp--animate_opacity')},30)),Jt=setTimeout(function(){if(Fe('initialZoom'+(a?'Out':'In')),!a)D=t.initialZoomLevel,Be(be,t.initialPosition),Ne(),ze(1),o?e.style.opacity=1:ze(1),Jt=setTimeout(l,s+20);else{var r=n.w/t.w,p={x:be.x,y:be.y},m=D,c=ye,x=function(t){1===t?(D=r,be.x=n.x,be.y=n.y-B):(D=(r-m)*t+m,be.x=(n.x-p.x)*t+p.x,be.y=(n.y-B-p.y)*t+p.y),Ne(),o?e.style.opacity=1-t:ze(c-t*c)};i?dt('initialZoom',0,1,s,d.easing.cubic.out,x,l):(x(1),Jt=setTimeout(l,s+20))}},a?25:90)})()},li={},ri=[],di={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return ei.length}},pi=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},mi=function(e,t,i){var a=e.bounds;a.center.x=l((li.x-t)/2),a.center.y=l((li.y-i)/2)+e.vGap.top,a.max.x=t>li.x?l(li.x-t):a.center.x,a.max.y=i>li.y?l(li.y-i)+e.vGap.top:a.center.y,a.min.x=t>li.x?0:a.center.x,a.min.y=i>li.y?e.vGap.top:a.center.y},ci=function(e,t,i){if(e.src&&!e.loadError){var a=!i;if(a&&(!e.vGap&&(e.vGap={top:0,bottom:0}),Fe('parseVerticalMargin',e)),li.x=t.x,li.y=t.y-e.vGap.top-e.vGap.bottom,a){var o=li.x/e.w,n=li.y/e.h;e.fitRatio=o<n?o:n;var s=u.scaleMode;'orig'===s?i=1:'fit'===s&&(i=e.fitRatio),1<i&&(i=1),e.initialZoomLevel=i,e.bounds||(e.bounds=pi())}return i?(mi(e,e.w*i,e.h*i),a&&i===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=pi(),e.initialPosition=e.bounds.center,e.bounds},xi=function(e,t,i,a,o,n){t.loadError||a&&(t.imageAppended=!0,hi(t,a,t===m.currItem&&Re),i.appendChild(a),n&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display='none',t.placeholder=null)},500))},ui=function(e){e.loading=!0,e.loaded=!1;var t=e.img=d.createEl('pswp__img','img'),i=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=i,t.onerror=function(){e.loadError=!0,i()},t.src=e.src,t},yi=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=''),e.container.innerHTML=u.errorMsg.replace('%url%',e.src),!0},hi=function(e,t,i){if(e.src){t||(t=e.container.lastChild);var a=i?e.w:l(e.w*e.fitRatio),o=i?e.h:l(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=a+'px',e.placeholder.style.height=o+'px'),t.style.width=a+'px',t.style.height=o+'px'}},gi=function(){if(ri.length){for(var e,t=0;t<ri.length;t++)e=ri[t],e.holder.index===e.index&&xi(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);ri=[]}};Te('Controller',{publicMethods:{lazyLoadItem:function(e){e=Ze(e);var t=ai(e);t&&(!t.loaded&&!t.loading||k)&&(Fe('gettingData',e,t),t.src&&ui(t))},initController:function(){d.extend(u,di,!0),m.items=ei=i,ai=m.getItemAt,oi=u.getNumItemsFn,ni=u.loop,3>oi()&&(u.loop=!1),Le('beforeChange',function(e){var t,i=u.preload,a=!(null!==e)||0<=e,n=o(i[0],oi()),s=o(i[1],oi());for(t=1;t<=(a?s:n);t++)m.lazyLoadItem(f+t);for(t=1;t<=(a?n:s);t++)m.lazyLoadItem(f-t)}),Le('initialLayout',function(){m.currItem.initialLayout=u.getThumbBoundsFn&&u.getThumbBoundsFn(f)}),Le('mainScrollAnimComplete',gi),Le('initialZoomInEnd',gi),Le('destroy',function(){for(var e,t=0;t<ei.length;t++)e=ei[t],e.container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);ri=null})},getItemAt:function(e){return!!(0<=e)&&void 0!==ei[e]&&ei[e]},allowProgressiveImg:function(){return u.forceProgressiveLoading||!M||u.mouseUsed||1200<screen.width},setContent:function(e,t){u.loop&&(t=Ze(t));var i=m.getItemAt(e.index);i&&(i.container=null);var a,o=m.getItemAt(t);if(!o)return void(e.el.innerHTML='');Fe('gettingData',t,o),e.index=t,e.item=o;var n=o.container=d.createEl('pswp__zoom-wrap');if(!o.src&&o.html&&(o.html.tagName?n.appendChild(o.html):n.innerHTML=o.html),yi(o),ci(o,Ce),o.src&&!o.loadError&&!o.loaded){if(o.loadComplete=function(i){if(y){if(e&&e.index===t){if(yi(i,!0))return i.loadComplete=i.img=null,ci(i,Ce),Ue(i),void(e.index===f&&m.updateCurrZoomItem());i.imageAppended?!ii&&i.placeholder&&(i.placeholder.style.display='none',i.placeholder=null):G.transform&&(me||ii)?ri.push({item:i,baseDiv:n,img:i.img,index:t,holder:e,clearPlaceholder:!0}):xi(t,i,n,i.img,me||ii,!0)}i.loadComplete=null,i.img=null,Fe('imageLoadComplete',t,i)}},d.features.transform){var s='pswp__img pswp__img--placeholder';s+=o.msrc?'':' pswp__img--placeholder--blank';var l=d.createEl(s,o.msrc?'img':'');o.msrc&&(l.src=o.msrc),hi(o,l),n.appendChild(l),o.placeholder=l}o.loading||ui(o),m.allowProgressiveImg()&&(!ti&&G.transform?ri.push({item:o,baseDiv:n,img:o.img,index:t,holder:e}):xi(t,o,n,o.img,!0,!0))}else o.src&&!o.loadError&&(a=d.createEl('pswp__img','img'),a.style.opacity=1,a.src=o.src,hi(o,a),xi(t,o,n,a,!0));ti||t!==f?Ue(o):(pe=n.style,si(o,a||o.img)),e.el.innerHTML='',e.el.appendChild(n)},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var fi,wi={},vi=function(t,i,a){var o=document.createEvent('CustomEvent'),e={origEvent:t,target:t.target,releasePoint:i,pointerType:a||'touch'};o.initCustomEvent('pswpTap',!0,!0,e),t.target.dispatchEvent(o)};Te('Tap',{publicMethods:{initTap:function(){Le('firstTouchStart',m.onTapStart),Le('touchRelease',m.onTapRelease),Le('destroy',function(){wi={},fi=null})},onTapStart:function(e){1<e.length&&(clearTimeout(fi),fi=null)},onTapRelease:function(t,e){if(e&&!ie&&!ee&&!nt){var i=e;if(fi&&(clearTimeout(fi),fi=null,At(i,wi)))return void Fe('doubleTap',i);if('mouse'===e.type)return void vi(t,e,'mouse');var a=t.target.tagName.toUpperCase();if('BUTTON'===a||d.hasClass(t.target,'pswp__single-tap'))return void vi(t,e);Be(wi,i),fi=setTimeout(function(){vi(t,e),fi=null},300)}}}});var bi;Te('DesktopZoom',{publicMethods:{initDesktopZoom:function(){W||(M?Le('mouseUsed',function(){m.setupDesktopZoom()}):m.setupDesktopZoom(!0))},setupDesktopZoom:function(t){bi={};var i='wheel mousewheel DOMMouseScroll';Le('bindEvents',function(){d.bind(e,i,m.handleMouseWheel)}),Le('unbindEvents',function(){bi&&d.unbind(e,i,m.handleMouseWheel)}),m.mouseZoomedIn=!1;var a,o=function(){m.mouseZoomedIn&&(d.removeClass(e,'pswp--zoomed-in'),m.mouseZoomedIn=!1),1>D?d.addClass(e,'pswp--zoom-allowed'):d.removeClass(e,'pswp--zoom-allowed'),n()},n=function(){a&&(d.removeClass(e,'pswp--dragging'),a=!1)};Le('resize',o),Le('afterChange',o),Le('pointerDown',function(){m.mouseZoomedIn&&(a=!0,d.addClass(e,'pswp--dragging'))}),Le('pointerUp',n),t||o()},handleMouseWheel:function(t){if(D<=m.currItem.fitRatio)return u.modal&&(!u.closeOnScroll||nt||J?t.preventDefault():_&&2<n(t.deltaY)&&(g=!0,m.close())),!0;if(t.stopPropagation(),bi.x=0,'deltaX'in t)1===t.deltaMode?(bi.x=18*t.deltaX,bi.y=18*t.deltaY):(bi.x=t.deltaX,bi.y=t.deltaY);else if('wheelDelta'in t)t.wheelDeltaX&&(bi.x=-0.16*t.wheelDeltaX),bi.y=t.wheelDeltaY?-0.16*t.wheelDeltaY:-0.16*t.wheelDelta;else if('detail'in t)bi.y=t.detail;else return;je(D,!0);var e=be.x-bi.x,i=be.y-bi.y;(u.modal||e<=de.min.x&&e>=de.max.x&&i<=de.min.y&&i>=de.max.y)&&t.preventDefault(),m.panTo(e,i)},toggleDesktopZoom:function(t){t=t||{x:Ce.x/2+De.x,y:Ce.y/2+De.y};var i=u.getDoubleTapZoom(!0,m.currItem),a=D===i;m.mouseZoomedIn=!a,m.zoomTo(a?m.currItem.initialZoomLevel:i,t,333),d[(a?'remove':'add')+'Class'](e,'pswp--zoomed-in')}}});var Ci,Ii,Di,Si,Ei,Ai,Oi,ki,Ri,Ti,Zi,Pi,Li={history:!0,galleryUID:1},Fi=function(){return Zi.hash.substring(1)},_i=function(){Ci&&clearTimeout(Ci),Di&&clearTimeout(Di)},zi=function(){var e=Fi(),t={};if(5>e.length)return t;var a,i=e.split('&');for(a=0;a<i.length;a++)if(i[a]){var o=i[a].split('=');2>o.length||(t[o[0]]=o[1])}if(u.galleryPIDs){var n=t.pid;for(t.pid=0,a=0;a<ei.length;a++)if(ei[a].pid===n){t.pid=a;break}}else t.pid=parseInt(t.pid,10)-1;return 0>t.pid&&(t.pid=0),t},Mi=function(){if(Di&&clearTimeout(Di),nt||J)return void(Di=setTimeout(Mi,500));Si?clearTimeout(Ii):Si=!0;var e=f+1,t=ai(f);t.hasOwnProperty('pid')&&(e=t.pid);var i=Oi+'&gid='+u.galleryUID+'&pid='+e;ki||-1!==Zi.hash.indexOf(i)||(Ti=!0);var a=Zi.href.split('#')[0]+'#'+i;Pi?'#'+i!==window.location.hash&&history[ki?'replaceState':'pushState']('',document.title,a):ki?Zi.replace(a):Zi.hash=i,ki=!0,Ii=setTimeout(function(){Si=!1},60)};Te('History',{publicMethods:{initHistory:function(){if(d.extend(u,Li,!0),!!u.history){Zi=window.location,Ti=!1,Ri=!1,ki=!1,Oi=Fi(),Pi='pushState'in history,-1<Oi.indexOf('gid=')&&(Oi=Oi.split('&gid=')[0],Oi=Oi.split('?gid=')[0]),Le('afterChange',m.updateURL),Le('unbindEvents',function(){d.unbind(window,'hashchange',m.onHashChange)});var e=function(){Ai=!0,Ri||(Ti?history.back():Oi?Zi.hash=Oi:Pi?history.pushState('',document.title,Zi.pathname+Zi.search):Zi.hash=''),_i()};Le('unbindEvents',function(){g&&e()}),Le('destroy',function(){Ai||e()}),Le('firstUpdate',function(){f=zi().pid});var t=Oi.indexOf('pid=');-1<t&&(Oi=Oi.substring(0,t),'&'===Oi.slice(-1)&&(Oi=Oi.slice(0,-1))),setTimeout(function(){y&&d.bind(window,'hashchange',m.onHashChange)},40)}},onHashChange:function(){return Fi()===Oi?(Ri=!0,void m.close()):void(!Si&&(Ei=!0,m.goTo(zi().pid),Ei=!1))},updateURL:function(){_i();Ei||(ki?Ci=setTimeout(Mi,800):Mi())}}}),d.extend(m,{shout:Fe,listen:Le,viewportSize:Ce,options:u,isMainScrollAnimating:function(){return me},getZoomLevel:function(){return D},getCurrentIndex:function(){return f},isDragging:function(){return J},isZooming:function(){return se},setScrollOffset:function(e,t){De.x=e,B=De.y=t,Fe('updateScrollOffset',De)},applyZoomPan:function(e,t,i,a){be.x=t,be.y=i,D=e,Ne(a)},init:function(){if(!(y||h)){var a;m.framework=d,m.template=e,m.bg=d.getChildByClass(e,'pswp__bg'),Y=e.className,y=!0,G=d.detectFeatures(),N=G.raf,U=G.caf,_=G.transform,W=G.oldIE,m.scrollWrap=d.getChildByClass(e,'pswp__scroll-wrap'),m.container=d.getChildByClass(m.scrollWrap,'pswp__container'),w=m.container.style,m.itemHolders=R=[{el:m.container.children[0],wrap:0,index:-1},{el:m.container.children[1],wrap:0,index:-1},{el:m.container.children[2],wrap:0,index:-1}],R[0].el.style.display=R[2].el.style.display='none',et(),I={resize:m.updateSize,orientationchange:function(){clearTimeout(X),X=setTimeout(function(){Ce.x!==m.scrollWrap.clientWidth&&m.updateSize()},500)},scroll:at,keydown:tt,click:it};var i=G.isOldIOSPhone||G.isOldAndroid||G.isMobileOpera;for(G.animationName&&G.transform&&!i||(u.showAnimationDuration=u.hideAnimationDuration=0),a=0;a<Oe.length;a++)m['init'+Oe[a]]();if(t){var o=m.ui=new t(m,d);o.init()}Fe('firstUpdate'),f=f||u.index||0,(isNaN(f)||0>f||f>=oi())&&(f=0),m.currItem=ai(f),(G.isOldIOSPhone||G.isOldAndroid)&&(Ae=!1),e.setAttribute('aria-hidden','false'),u.modal&&(Ae?e.style.position='fixed':(e.style.position='absolute',e.style.top=d.getScrollY()+'px')),void 0===B&&(Fe('initialLayout'),B=H=d.getScrollY());var n='pswp--open ';for(u.mainClass&&(n+=u.mainClass+' '),u.showHideOpacity&&(n+='pswp--animate_opacity '),n+=M?'pswp--touch':'pswp--notouch',n+=G.animationName?' pswp--css_animation':'',n+=G.svg?' pswp--svg':'',d.addClass(e,n),m.updateSize(),v=-1,Ee=null,a=0;a<x;a++)Ye((a+v)*Se.x,R[a].el.style);W||d.bind(m.scrollWrap,C,m),Le('initialZoomInEnd',function(){m.setContent(R[0],f-1),m.setContent(R[2],f+1),R[0].el.style.display=R[2].el.style.display='block',u.focus&&e.focus(),Ke()}),m.setContent(R[1],f),m.updateCurrItem(),Fe('afterInit'),Ae||(O=setInterval(function(){nt||J||se||D!==m.currItem.initialZoomLevel||m.updateSize()},1e3)),d.addClass(e,'pswp--visible')}},close:function(){y&&(y=!1,h=!0,Fe('close'),qe(),si(m.currItem,null,!0,m.destroy))},destroy:function(){Fe('destroy'),Jt&&clearTimeout(Jt),e.setAttribute('aria-hidden','true'),e.className=Y,O&&clearInterval(O),d.unbind(m.scrollWrap,C,m),d.unbind(window,'scroll',m),kt(),rt(),Pe=null},panTo:function(e,t,i){i||(e>de.min.x?e=de.min.x:e<de.max.x&&(e=de.max.x),t>de.min.y?t=de.min.y:t<de.max.y&&(t=de.max.y)),be.x=e,be.y=t,Ne()},handleEvent:function(t){t=t||window.event,I[t.type]&&I[t.type](t)},goTo:function(e){e=Ze(e);var t=e-f;Ee=t,f=e,m.currItem=ai(f),Ie-=t,He(Se.x*Ie),rt(),me=!1,m.updateCurrItem()},next:function(){m.goTo(f+1)},prev:function(){m.goTo(f-1)},updateCurrZoomItem:function(e){if(e&&Fe('beforeChange',0),R[1].el.children.length){var t=R[1].el.children[0];pe=d.hasClass(t,'pswp__zoom-wrap')?t.style:null}else pe=null;de=m.currItem.bounds,S=D=m.currItem.initialZoomLevel,be.x=de.center.x,be.y=de.center.y,e&&Fe('afterChange')},invalidateCurrItems:function(){k=!0;for(var e=0;e<x;e++)R[e].item&&(R[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==Ee){var t,a=n(Ee);if(!(e&&2>a)){m.currItem=ai(f),Re=!1,Fe('beforeChange',Ee),a>=x&&(v+=Ee+(0<Ee?-x:x),a=x);for(var o=0;o<a;o++)0<Ee?(t=R.shift(),R[x-1]=t,v++,Ye((v+2)*Se.x,t.el.style),m.setContent(t,f-a+o+1+1)):(t=R.pop(),R.unshift(t),v--,Ye(v*Se.x,t.el.style),m.setContent(t,f+a-o-1-1));if(pe&&1===n(Ee)){var i=ai(T);i.initialZoomLevel!==D&&(ci(i,Ce),hi(i),Ue(i))}Ee=0,m.updateCurrZoomItem(),T=f,Fe('afterChange')}}},updateSize:function(t){if(!Ae&&u.modal){var a=d.getScrollY();if(B!==a&&(e.style.top=a+'px',B=a),!t&&ke.x===window.innerWidth&&ke.y===window.innerHeight)return;ke.x=window.innerWidth,ke.y=window.innerHeight,e.style.height=ke.y+'px'}if(Ce.x=m.scrollWrap.clientWidth,Ce.y=m.scrollWrap.clientHeight,at(),Se.x=Ce.x+l(Ce.x*u.spacing),Se.y=Ce.y,He(Se.x*Ie),Fe('beforeResize'),void 0!==v){for(var o,n,s,r=0;r<x;r++)o=R[r],Ye((r+v)*Se.x,o.el.style),s=f+r-1,u.loop&&2<oi()&&(s=Ze(s)),n=ai(s),n&&(k||n.needsUpdate||!n.bounds)?(m.cleanSlide(n),m.setContent(o,s),1===r&&(m.currItem=n,m.updateCurrZoomItem(!0)),n.needsUpdate=!1):-1===o.index&&0<=s&&m.setContent(o,s),n&&n.container&&(ci(n,Ce),hi(n),Ue(n));k=!1}S=D=m.currItem.initialZoomLevel,de=m.currItem.bounds,de&&(be.x=de.center.x,be.y=de.center.y,Ne(!0)),Fe('resize')},zoomTo:function(e,t,i,a,o){t&&(S=D,Dt.x=n(t.x)-be.x,Dt.y=n(t.y)-be.y,Be(ve,be));var s=je(e,!1),l={};Je('x',s,l,e),Je('y',s,l,e);var r=D,p={x:be.x,y:be.y};Ge(l);var m=function(t){1===t?(D=e,be.x=l.x,be.y=l.y):(D=(e-r)*t+r,be.x=(l.x-p.x)*t+p.x,be.y=(l.y-p.y)*t+p.y),o&&o(t),Ne(1===t)};i?dt('customZoomTo',0,1,i,a||d.easing.sine.inOut,m):m(1)}})}});