'use strict';(function(a,b){'function'==typeof define&&define.amd?define(b):'object'==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()})(this,function(){'use strict';return function(a,b){var c,d,e,f,g,h,j,i,k,l,m,n,o,p,q,r,s,t,u=this,v=!1,w=!0,x=!0,y={barsSize:{top:44,bottom:'auto'},closeElClasses:['item','caption','zoom-wrap','ui','top-bar'],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML='',!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:'facebook',label:'Share on Facebook',url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},{id:'twitter',label:'Tweet',url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},{id:'pinterest',label:'Pin it',url:'http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}'},{id:'download',label:'Download image',url:'{{raw_image_url}}',download:!0}],getImageURLForShare:function(){return a.currItem.src||''},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||''},indexIndicatorSep:' / ',fitControlsWidth:1200},z=function(a){if(r)return!0;a=a||window.event,q.timeToIdle&&q.mouseUsed&&!k&&J();for(var c,d,e=a.target||a.srcElement,f=e.getAttribute('class')||'',g=0;g<R.length;g++)c=R[g],c.onTap&&-1<f.indexOf('pswp__'+c.name)&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),r=!0;var h=b.features.isOldAndroid?600:30;setTimeout(function(){r=!1},h)}},A=function(){return!a.likelyTouchDevice||q.mouseUsed||screen.width>q.fitControlsWidth},B=function(a,c,d){b[(d?'add':'remove')+'Class'](a,'pswp__'+c)},C=function(){var a=1===q.getNumItemsFn();a!==p&&(B(d,'ui--one-slide',a),p=a)},D=function(){B(j,'share-modal--hidden',x)},E=function(){return x=!x,x?(b.removeClass(j,'pswp__share-modal--fade-in'),setTimeout(function(){x&&D()},300)):(D(),setTimeout(function(){x||b.addClass(j,'pswp__share-modal--fade-in')},30)),x||G(),!1},F=function(b){b=b||window.event;var c=b.target||b.srcElement;return(a.shout('shareLinkClick',b,c),!!c.href)&&(!!c.hasAttribute('download')||(window.open(c.href,'pswp_share','scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left='+(window.screen?Math.round(screen.width/2-275):100)),x||E(),!1))},G=function(){for(var a,b,c,d,e,f='',g=0;g<q.shareButtons.length;g++)a=q.shareButtons[g],c=q.getImageURLForShare(a),d=q.getPageURLForShare(a),e=q.getTextForShare(a),b=a.url.replace('{{url}}',encodeURIComponent(d)).replace('{{image_url}}',encodeURIComponent(c)).replace('{{raw_image_url}}',c).replace('{{text}}',encodeURIComponent(e)),f+='<a href="'+b+'" target="_blank" class="pswp__share--'+a.id+'"'+(a.download?'download':'')+'>'+a.label+'</a>',q.parseShareButtonOut&&(f=q.parseShareButtonOut(a,f));j.children[0].innerHTML=f,j.children[0].onclick=F},H=function(a){for(var c=0;c<q.closeElClasses.length;c++)if(b.hasClass(a,'pswp__'+q.closeElClasses[c]))return!0},I=0,J=function(){clearTimeout(t),I=0,k&&u.setIdle(!1)},K=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&'HTML'!==b.nodeName||(clearTimeout(t),t=setTimeout(function(){u.setIdle(!0)},q.timeToIdleOutside))},L=function(){q.fullscreenEl&&!b.features.isOldAndroid&&(!c&&(c=u.getFullscreenAPI()),c?(b.bind(document,c.eventK,u.updateFullscreen),u.updateFullscreen(),b.addClass(a.template,'pswp--supports-fs')):b.removeClass(a.template,'pswp--supports-fs'))},M=function(){q.preloaderEl&&(N(!0),l('beforeChange',function(){clearTimeout(o),o=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&N(!1):N(!0)},q.loadingIndicatorDelay)}),l('imageLoadComplete',function(b,c){a.currItem===c&&N(!0)}))},N=function(a){n!==a&&(B(m,'preloader--active',!a),n=a)},O=function(a){var c=a.vGap;if(A()){var g=q.barsSize;if(!(q.captionEl&&'auto'===g.bottom))c.bottom='auto'===g.bottom?0:g.bottom;else if(f||(f=b.createEl('pswp__caption pswp__caption--fake'),f.appendChild(b.createEl('pswp__caption__center')),d.insertBefore(f,e),b.addClass(d,'pswp__ui--fit')),q.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;c.top=g.top}else c.top=c.bottom=0},P=function(){q.timeToIdle&&l('mouseUsed',function(){b.bind(document,'mousemove',J),b.bind(document,'mouseout',K),s=setInterval(function(){I++,2==I&&u.setIdle(!0)},q.timeToIdle/2)})},Q=function(){l('onVerticalDrag',function(a){w&&0.95>a?u.hideControls():!w&&0.95<=a&&u.showControls()});var a;l('onPinchClose',function(b){w&&0.9>b?(u.hideControls(),a=!0):a&&!w&&0.9<b&&u.showControls()}),l('zoomGestureEnded',function(){a=!1,a&&!w&&u.showControls()})},R=[{name:'caption',option:'captionEl',onInit:function(a){e=a}},{name:'share-modal',option:'shareEl',onInit:function(a){j=a},onTap:function(){E()}},{name:'button--share',option:'shareEl',onInit:function(a){h=a},onTap:function(){E()}},{name:'button--zoom',option:'zoomEl',onTap:a.toggleDesktopZoom},{name:'counter',option:'counterEl',onInit:function(a){g=a}},{name:'button--close',option:'closeEl',onTap:a.close},{name:'button--arrow--left',option:'arrowEl',onTap:a.prev},{name:'button--arrow--right',option:'arrowEl',onTap:a.next},{name:'button--fs',option:'fullscreenEl',onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:'preloader',option:'preloaderEl',onInit:function(a){m=a}}],S=function(){var c,e,f,a=function(d){if(d)for(var g=d.length,h=0;h<g;h++){c=d[h],e=c.className;for(var i=0;i<R.length;i++)f=R[i],-1<e.indexOf('pswp__'+f.name)&&(q[f.option]?(b.removeClass(c,'pswp__element--disabled'),f.onInit&&f.onInit(c)):b.addClass(c,'pswp__element--disabled'))}};a(d.children);var g=b.getChildByClass(d,'pswp__top-bar');g&&a(g.children)};u.init=function(){b.extend(a.options,y,!0),q=a.options,d=b.getChildByClass(a.scrollWrap,'pswp__ui'),l=a.listen,Q(),l('beforeChange',u.update),l('doubleTap',function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()===c?a.zoomTo(q.getDoubleTapZoom(!1,a.currItem),b,333):a.zoomTo(c,b,333)}),l('preventDragEvent',function(a,b,c){var d=a.target||a.srcElement;d&&d.getAttribute('class')&&-1<a.type.indexOf('mouse')&&(0<d.getAttribute('class').indexOf('__caption')||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l('bindEvents',function(){b.bind(d,'pswpTap click',z),b.bind(a.scrollWrap,'pswpTap',u.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,'mouseover',u.onMouseOver)}),l('unbindEvents',function(){x||E(),s&&clearInterval(s),b.unbind(document,'mouseout',K),b.unbind(document,'mousemove',J),b.unbind(d,'pswpTap click',z),b.unbind(a.scrollWrap,'pswpTap',u.onGlobalTap),b.unbind(a.scrollWrap,'mouseover',u.onMouseOver),c&&(b.unbind(document,c.eventK,u.updateFullscreen),c.isFullscreen()&&(q.hideAnimationDuration=0,c.exit()),c=null)}),l('destroy',function(){q.captionEl&&(f&&d.removeChild(f),b.removeClass(e,'pswp__caption--empty')),j&&(j.children[0].onclick=null),b.removeClass(d,'pswp__ui--over-close'),b.addClass(d,'pswp__ui--hidden'),u.setIdle(!1)}),q.showAnimationDuration||b.removeClass(d,'pswp__ui--hidden'),l('initialZoomIn',function(){q.showAnimationDuration&&b.removeClass(d,'pswp__ui--hidden')}),l('initialZoomOut',function(){b.addClass(d,'pswp__ui--hidden')}),l('parseVerticalMargin',O),S(),q.shareEl&&h&&j&&(x=!0),C(),P(),L(),M()},u.setIdle=function(a){k=a,B(d,'ui--idle',a)},u.update=function(){w&&a.currItem?(u.updateIndexIndicator(),q.captionEl&&(q.addCaptionHTMLFn(a.currItem,e),B(e,'caption--empty',!a.currItem.title)),v=!0):v=!1,x||E(),C()},u.updateFullscreen=function(d){d&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(c.isFullscreen()?'add':'remove')+'Class'](a.template,'pswp--fs')},u.updateIndexIndicator=function(){q.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+q.indexIndicatorSep+q.getNumItemsFn())},u.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!r)if(c.detail&&'mouse'===c.detail.pointerType){if(H(d))return void a.close();b.hasClass(d,'pswp__img')&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?q.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(c.detail.releasePoint))}else if(q.tapToToggleControls&&(w?u.hideControls():u.showControls()),q.tapToClose&&(b.hasClass(d,'pswp__img')||H(d)))return void a.close()},u.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;B(d,'ui--over-close',H(b))},u.hideControls=function(){b.addClass(d,'pswp__ui--hidden'),w=!1},u.showControls=function(){w=!0,v||u.update(),b.removeClass(d,'pswp__ui--hidden')},u.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},u.getFullscreenAPI=function(){var b,c=document.documentElement,d='fullscreenchange';return c.requestFullscreen?b={enterK:'requestFullscreen',exitK:'exitFullscreen',elementK:'fullscreenElement',eventK:d}:c.mozRequestFullScreen?b={enterK:'mozRequestFullScreen',exitK:'mozCancelFullScreen',elementK:'mozFullScreenElement',eventK:'moz'+d}:c.webkitRequestFullscreen?b={enterK:'webkitRequestFullscreen',exitK:'webkitExitFullscreen',elementK:'webkitFullscreenElement',eventK:'webkit'+d}:c.msRequestFullscreen&&(b={enterK:'msRequestFullscreen',exitK:'msExitFullscreen',elementK:'msFullscreenElement',eventK:'MSFullscreenChange'}),b&&(b.enter=function(){return i=q.closeOnScroll,q.closeOnScroll=!1,'webkitRequestFullscreen'===this.enterK?void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT):a.template[this.enterK]()},b.exit=function(){return q.closeOnScroll=i,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}}});